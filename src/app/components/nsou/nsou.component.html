<form [formGroup]="form">
  <!-- ðŸ”¢ Level selector -->
  <mat-form-field appearance="fill">
    <mat-label>Select Level</mat-label>
    <mat-select formControlName="level">
      <mat-option *ngFor="let lvl of levels$ | async" [value]="lvl">
        {{ lvl.name }} (L{{ lvl.level }})
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- âœ… Level 2 autocomplete -->
  <mat-form-field appearance="fill">
    <mat-label>Level 2 Organisation Unit</mat-label>
    <input
      matInput
      formControlName="ou1"
      [matAutocomplete]="auto2"
      placeholder="Type to filter level 2"
    />
    <mat-autocomplete
      #auto2="matAutocomplete"
      [displayWith]="displayOU.bind(this)"
    >
      <mat-option *ngFor="let ou of filtered1$ | async" [value]="ou">
        {{ ou.name }} â€” {{ ou.shortName }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <!-- ðŸ”¼ Level 3 autocomplete -->
  <mat-form-field appearance="fill">
    <mat-label>Level 3 Organisation Unit</mat-label>
    <input
      matInput
      formControlName="ou2"
      [matAutocomplete]="auto3"
      placeholder="Type to filter level 3"
    />
    <mat-autocomplete
      #auto3="matAutocomplete"
      [displayWith]="displayOU.bind(this)"
    >
      <mat-option *ngFor="let ou of filtered2$ | async" [value]="ou">
        {{ ou.name }} â€” {{ ou.shortName }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <!-- ðŸ”½ Level 4 autocomplete -->
  <mat-form-field appearance="fill">
    <mat-label>Level 4 Organisation Unit</mat-label>
    <input
      matInput
      formControlName="ou3"
      [matAutocomplete]="auto4"
      placeholder="Type to filter level 4"
    />
    <mat-autocomplete
      #auto4="matAutocomplete"
      [displayWith]="displayOU.bind(this)"
    >
      <mat-option *ngFor="let ou of filtered3$ | async" [value]="ou">
        {{ ou.name }} â€” {{ ou.shortName }}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>
</form>
